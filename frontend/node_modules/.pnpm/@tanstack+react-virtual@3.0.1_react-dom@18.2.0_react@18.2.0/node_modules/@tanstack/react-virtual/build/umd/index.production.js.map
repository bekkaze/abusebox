{"version":3,"file":"index.production.js","sources":["../../../virtual-core/build/lib/_virtual/_rollupPluginBabelHelpers.mjs","../../../virtual-core/build/lib/utils.mjs","../../../virtual-core/build/lib/index.mjs","../../src/index.tsx"],"sourcesContent":["/**\n * virtual-core\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nexport { _extends as extends };\n//# sourceMappingURL=_rollupPluginBabelHelpers.mjs.map\n","/**\n * virtual-core\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nfunction memo(getDeps, fn, opts) {\n  var _opts$initialDeps;\n  var deps = (_opts$initialDeps = opts.initialDeps) != null ? _opts$initialDeps : [];\n  var result;\n  return function () {\n    var depTime;\n    if (opts.key && opts.debug != null && opts.debug()) depTime = Date.now();\n    var newDeps = getDeps();\n    var depsChanged = newDeps.length !== deps.length || newDeps.some(function (dep, index) {\n      return deps[index] !== dep;\n    });\n    if (!depsChanged) {\n      return result;\n    }\n    deps = newDeps;\n    var resultTime;\n    if (opts.key && opts.debug != null && opts.debug()) resultTime = Date.now();\n    result = fn.apply(void 0, newDeps);\n    if (opts.key && opts.debug != null && opts.debug()) {\n      var depEndTime = Math.round((Date.now() - depTime) * 100) / 100;\n      var resultEndTime = Math.round((Date.now() - resultTime) * 100) / 100;\n      var resultFpsPercentage = resultEndTime / 16;\n      var pad = function pad(str, num) {\n        str = String(str);\n        while (str.length < num) {\n          str = ' ' + str;\n        }\n        return str;\n      };\n      console.info(\"%c\\u23F1 \" + pad(resultEndTime, 5) + \" /\" + pad(depEndTime, 5) + \" ms\", \"\\n            font-size: .6rem;\\n            font-weight: bold;\\n            color: hsl(\" + Math.max(0, Math.min(120 - 120 * resultFpsPercentage, 120)) + \"deg 100% 31%);\", opts == null ? void 0 : opts.key);\n    }\n    opts == null || opts.onChange == null || opts.onChange(result);\n    return result;\n  };\n}\nfunction notUndefined(value, msg) {\n  if (value === undefined) {\n    throw new Error(\"Unexpected undefined\" + (msg ? \": \" + msg : ''));\n  } else {\n    return value;\n  }\n}\nvar approxEqual = function approxEqual(a, b) {\n  return Math.abs(a - b) < 1;\n};\n\nexport { approxEqual, memo, notUndefined };\n//# sourceMappingURL=utils.mjs.map\n","/**\n * virtual-core\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport { extends as _extends } from './_virtual/_rollupPluginBabelHelpers.mjs';\nimport { memo, notUndefined, approxEqual } from './utils.mjs';\nexport { approxEqual, memo, notUndefined } from './utils.mjs';\n\n//\n\n//\n\nvar defaultKeyExtractor = function defaultKeyExtractor(index) {\n  return index;\n};\nvar defaultRangeExtractor = function defaultRangeExtractor(range) {\n  var start = Math.max(range.startIndex - range.overscan, 0);\n  var end = Math.min(range.endIndex + range.overscan, range.count - 1);\n  var arr = [];\n  for (var _i = start; _i <= end; _i++) {\n    arr.push(_i);\n  }\n  return arr;\n};\nvar observeElementRect = function observeElementRect(instance, cb) {\n  var element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  var handler = function handler(rect) {\n    var width = rect.width,\n      height = rect.height;\n    cb({\n      width: Math.round(width),\n      height: Math.round(height)\n    });\n  };\n  handler(element.getBoundingClientRect());\n  var observer = new ResizeObserver(function (entries) {\n    var entry = entries[0];\n    if (entry != null && entry.borderBoxSize) {\n      var box = entry.borderBoxSize[0];\n      if (box) {\n        handler({\n          width: box.inlineSize,\n          height: box.blockSize\n        });\n        return;\n      }\n    }\n    handler(element.getBoundingClientRect());\n  });\n  observer.observe(element, {\n    box: 'border-box'\n  });\n  return function () {\n    observer.unobserve(element);\n  };\n};\nvar observeWindowRect = function observeWindowRect(instance, cb) {\n  var element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  var handler = function handler() {\n    cb({\n      width: element.innerWidth,\n      height: element.innerHeight\n    });\n  };\n  handler();\n  element.addEventListener('resize', handler, {\n    passive: true\n  });\n  return function () {\n    element.removeEventListener('resize', handler);\n  };\n};\nvar observeElementOffset = function observeElementOffset(instance, cb) {\n  var element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  var handler = function handler() {\n    cb(element[instance.options.horizontal ? 'scrollLeft' : 'scrollTop']);\n  };\n  handler();\n  element.addEventListener('scroll', handler, {\n    passive: true\n  });\n  return function () {\n    element.removeEventListener('scroll', handler);\n  };\n};\nvar observeWindowOffset = function observeWindowOffset(instance, cb) {\n  var element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  var handler = function handler() {\n    cb(element[instance.options.horizontal ? 'scrollX' : 'scrollY']);\n  };\n  handler();\n  element.addEventListener('scroll', handler, {\n    passive: true\n  });\n  return function () {\n    element.removeEventListener('scroll', handler);\n  };\n};\nvar measureElement = function measureElement(element, entry, instance) {\n  if (entry != null && entry.borderBoxSize) {\n    var box = entry.borderBoxSize[0];\n    if (box) {\n      var size = Math.round(box[instance.options.horizontal ? 'inlineSize' : 'blockSize']);\n      return size;\n    }\n  }\n  return Math.round(element.getBoundingClientRect()[instance.options.horizontal ? 'width' : 'height']);\n};\nvar windowScroll = function windowScroll(offset, _ref, instance) {\n  var _instance$scrollEleme, _instance$scrollEleme2;\n  var _ref$adjustments = _ref.adjustments,\n    adjustments = _ref$adjustments === void 0 ? 0 : _ref$adjustments,\n    behavior = _ref.behavior;\n  var toOffset = offset + adjustments;\n  (_instance$scrollEleme = instance.scrollElement) == null || _instance$scrollEleme.scrollTo == null || _instance$scrollEleme.scrollTo((_instance$scrollEleme2 = {}, _instance$scrollEleme2[instance.options.horizontal ? 'left' : 'top'] = toOffset, _instance$scrollEleme2.behavior = behavior, _instance$scrollEleme2));\n};\nvar elementScroll = function elementScroll(offset, _ref2, instance) {\n  var _instance$scrollEleme3, _instance$scrollEleme4;\n  var _ref2$adjustments = _ref2.adjustments,\n    adjustments = _ref2$adjustments === void 0 ? 0 : _ref2$adjustments,\n    behavior = _ref2.behavior;\n  var toOffset = offset + adjustments;\n  (_instance$scrollEleme3 = instance.scrollElement) == null || _instance$scrollEleme3.scrollTo == null || _instance$scrollEleme3.scrollTo((_instance$scrollEleme4 = {}, _instance$scrollEleme4[instance.options.horizontal ? 'left' : 'top'] = toOffset, _instance$scrollEleme4.behavior = behavior, _instance$scrollEleme4));\n};\nvar Virtualizer = function Virtualizer(_opts) {\n  var _this = this;\n  this.unsubs = [];\n  this.scrollElement = null;\n  this.isScrolling = false;\n  this.isScrollingTimeoutId = null;\n  this.scrollToIndexTimeoutId = null;\n  this.measurementsCache = [];\n  this.itemSizeCache = new Map();\n  this.pendingMeasuredCacheIndexes = [];\n  this.scrollDirection = null;\n  this.scrollAdjustments = 0;\n  this.measureElementCache = new Map();\n  this.observer = function () {\n    var _ro = null;\n    var get = function get() {\n      if (_ro) {\n        return _ro;\n      } else if (typeof ResizeObserver !== 'undefined') {\n        return _ro = new ResizeObserver(function (entries) {\n          entries.forEach(function (entry) {\n            _this._measureElement(entry.target, entry);\n          });\n        });\n      } else {\n        return null;\n      }\n    };\n    return {\n      disconnect: function disconnect() {\n        var _get;\n        return (_get = get()) == null ? void 0 : _get.disconnect();\n      },\n      observe: function observe(target) {\n        var _get2;\n        return (_get2 = get()) == null ? void 0 : _get2.observe(target, {\n          box: 'border-box'\n        });\n      },\n      unobserve: function unobserve(target) {\n        var _get3;\n        return (_get3 = get()) == null ? void 0 : _get3.unobserve(target);\n      }\n    };\n  }();\n  this.range = null;\n  this.setOptions = function (opts) {\n    Object.entries(opts).forEach(function (_ref3) {\n      var key = _ref3[0],\n        value = _ref3[1];\n      if (typeof value === 'undefined') delete opts[key];\n    });\n    _this.options = _extends({\n      debug: false,\n      initialOffset: 0,\n      overscan: 1,\n      paddingStart: 0,\n      paddingEnd: 0,\n      scrollPaddingStart: 0,\n      scrollPaddingEnd: 0,\n      horizontal: false,\n      getItemKey: defaultKeyExtractor,\n      rangeExtractor: defaultRangeExtractor,\n      onChange: function onChange() {},\n      measureElement: measureElement,\n      initialRect: {\n        width: 0,\n        height: 0\n      },\n      scrollMargin: 0,\n      scrollingDelay: 150,\n      indexAttribute: 'data-index',\n      initialMeasurementsCache: [],\n      lanes: 1\n    }, opts);\n  };\n  this.notify = function (sync) {\n    _this.options.onChange == null || _this.options.onChange(_this, sync);\n  };\n  this.maybeNotify = memo(function () {\n    _this.calculateRange();\n    return [_this.isScrolling, _this.range ? _this.range.startIndex : null, _this.range ? _this.range.endIndex : null];\n  }, function (isScrolling) {\n    _this.notify(isScrolling);\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'maybeNotify',\n    debug: function debug() {\n      return _this.options.debug;\n    },\n    initialDeps: [this.isScrolling, this.range ? this.range.startIndex : null, this.range ? this.range.endIndex : null]\n  });\n  this.cleanup = function () {\n    _this.unsubs.filter(Boolean).forEach(function (d) {\n      return d();\n    });\n    _this.unsubs = [];\n    _this.scrollElement = null;\n  };\n  this._didMount = function () {\n    _this.measureElementCache.forEach(_this.observer.observe);\n    return function () {\n      _this.observer.disconnect();\n      _this.cleanup();\n    };\n  };\n  this._willUpdate = function () {\n    var scrollElement = _this.options.getScrollElement();\n    if (_this.scrollElement !== scrollElement) {\n      _this.cleanup();\n      _this.scrollElement = scrollElement;\n      _this._scrollToOffset(_this.scrollOffset, {\n        adjustments: undefined,\n        behavior: undefined\n      });\n      _this.unsubs.push(_this.options.observeElementRect(_this, function (rect) {\n        _this.scrollRect = rect;\n        _this.maybeNotify();\n      }));\n      _this.unsubs.push(_this.options.observeElementOffset(_this, function (offset) {\n        _this.scrollAdjustments = 0;\n        if (_this.scrollOffset === offset) {\n          return;\n        }\n        if (_this.isScrollingTimeoutId !== null) {\n          clearTimeout(_this.isScrollingTimeoutId);\n          _this.isScrollingTimeoutId = null;\n        }\n        _this.isScrolling = true;\n        _this.scrollDirection = _this.scrollOffset < offset ? 'forward' : 'backward';\n        _this.scrollOffset = offset;\n        _this.maybeNotify();\n        _this.isScrollingTimeoutId = setTimeout(function () {\n          _this.isScrollingTimeoutId = null;\n          _this.isScrolling = false;\n          _this.scrollDirection = null;\n          _this.maybeNotify();\n        }, _this.options.scrollingDelay);\n      }));\n    }\n  };\n  this.getSize = function () {\n    return _this.scrollRect[_this.options.horizontal ? 'width' : 'height'];\n  };\n  this.memoOptions = memo(function () {\n    return [_this.options.count, _this.options.paddingStart, _this.options.scrollMargin, _this.options.getItemKey];\n  }, function (count, paddingStart, scrollMargin, getItemKey) {\n    _this.pendingMeasuredCacheIndexes = [];\n    return {\n      count: count,\n      paddingStart: paddingStart,\n      scrollMargin: scrollMargin,\n      getItemKey: getItemKey\n    };\n  }, {\n    key: false\n  });\n  this.getFurthestMeasurement = function (measurements, index) {\n    var furthestMeasurementsFound = new Map();\n    var furthestMeasurements = new Map();\n    for (var m = index - 1; m >= 0; m--) {\n      var measurement = measurements[m];\n      if (furthestMeasurementsFound.has(measurement.lane)) {\n        continue;\n      }\n      var previousFurthestMeasurement = furthestMeasurements.get(measurement.lane);\n      if (previousFurthestMeasurement == null || measurement.end > previousFurthestMeasurement.end) {\n        furthestMeasurements.set(measurement.lane, measurement);\n      } else if (measurement.end < previousFurthestMeasurement.end) {\n        furthestMeasurementsFound.set(measurement.lane, true);\n      }\n      if (furthestMeasurementsFound.size === _this.options.lanes) {\n        break;\n      }\n    }\n    return furthestMeasurements.size === _this.options.lanes ? Array.from(furthestMeasurements.values()).sort(function (a, b) {\n      return a.end - b.end;\n    })[0] : undefined;\n  };\n  this.getMeasurements = memo(function () {\n    return [_this.memoOptions(), _this.itemSizeCache];\n  }, function (_ref4, itemSizeCache) {\n    var count = _ref4.count,\n      paddingStart = _ref4.paddingStart,\n      scrollMargin = _ref4.scrollMargin,\n      getItemKey = _ref4.getItemKey;\n    var min = _this.pendingMeasuredCacheIndexes.length > 0 ? Math.min.apply(Math, _this.pendingMeasuredCacheIndexes) : 0;\n    _this.pendingMeasuredCacheIndexes = [];\n    var measurements = _this.measurementsCache.slice(0, min);\n    for (var _i2 = min; _i2 < count; _i2++) {\n      var key = getItemKey(_i2);\n      var furthestMeasurement = _this.options.lanes === 1 ? measurements[_i2 - 1] : _this.getFurthestMeasurement(measurements, _i2);\n      var start = furthestMeasurement ? furthestMeasurement.end : paddingStart + scrollMargin;\n      var measuredSize = itemSizeCache.get(key);\n      var size = typeof measuredSize === 'number' ? measuredSize : _this.options.estimateSize(_i2);\n      var end = start + size;\n      var lane = furthestMeasurement ? furthestMeasurement.lane : _i2 % _this.options.lanes;\n      measurements[_i2] = {\n        index: _i2,\n        start: start,\n        size: size,\n        end: end,\n        key: key,\n        lane: lane\n      };\n    }\n    _this.measurementsCache = measurements;\n    return measurements;\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'getMeasurements',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.calculateRange = memo(function () {\n    return [_this.getMeasurements(), _this.getSize(), _this.scrollOffset];\n  }, function (measurements, outerSize, scrollOffset) {\n    return _this.range = measurements.length > 0 && outerSize > 0 ? calculateRange({\n      measurements: measurements,\n      outerSize: outerSize,\n      scrollOffset: scrollOffset\n    }) : null;\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'calculateRange',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.getIndexes = memo(function () {\n    return [_this.options.rangeExtractor, _this.calculateRange(), _this.options.overscan, _this.options.count];\n  }, function (rangeExtractor, range, overscan, count) {\n    return range === null ? [] : rangeExtractor(_extends({}, range, {\n      overscan: overscan,\n      count: count\n    }));\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'getIndexes',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.indexFromElement = function (node) {\n    var attributeName = _this.options.indexAttribute;\n    var indexStr = node.getAttribute(attributeName);\n    if (!indexStr) {\n      console.warn(\"Missing attribute name '\" + attributeName + \"={index}' on measured element.\");\n      return -1;\n    }\n    return parseInt(indexStr, 10);\n  };\n  this._measureElement = function (node, entry) {\n    var item = _this.measurementsCache[_this.indexFromElement(node)];\n    if (!item || !node.isConnected) {\n      _this.measureElementCache.forEach(function (cached, key) {\n        if (cached === node) {\n          _this.observer.unobserve(node);\n          _this.measureElementCache[\"delete\"](key);\n        }\n      });\n      return;\n    }\n    var prevNode = _this.measureElementCache.get(item.key);\n    if (prevNode !== node) {\n      if (prevNode) {\n        _this.observer.unobserve(prevNode);\n      }\n      _this.observer.observe(node);\n      _this.measureElementCache.set(item.key, node);\n    }\n    var measuredItemSize = _this.options.measureElement(node, entry, _this);\n    _this.resizeItem(item, measuredItemSize);\n  };\n  this.resizeItem = function (item, size) {\n    var _this$itemSizeCache$g;\n    var itemSize = (_this$itemSizeCache$g = _this.itemSizeCache.get(item.key)) != null ? _this$itemSizeCache$g : item.size;\n    var delta = size - itemSize;\n    if (delta !== 0) {\n      if (item.start < _this.scrollOffset) {\n        if (process.env.NODE_ENV !== 'production' && _this.options.debug) {\n          console.info('correction', delta);\n        }\n        _this._scrollToOffset(_this.scrollOffset, {\n          adjustments: _this.scrollAdjustments += delta,\n          behavior: undefined\n        });\n      }\n      _this.pendingMeasuredCacheIndexes.push(item.index);\n      _this.itemSizeCache = new Map(_this.itemSizeCache.set(item.key, size));\n      _this.notify(false);\n    }\n  };\n  this.measureElement = function (node) {\n    if (!node) {\n      return;\n    }\n    _this._measureElement(node, undefined);\n  };\n  this.getVirtualItems = memo(function () {\n    return [_this.getIndexes(), _this.getMeasurements()];\n  }, function (indexes, measurements) {\n    var virtualItems = [];\n    for (var k = 0, len = indexes.length; k < len; k++) {\n      var _i3 = indexes[k];\n      var measurement = measurements[_i3];\n      virtualItems.push(measurement);\n    }\n    return virtualItems;\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'getIndexes',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.getVirtualItemForOffset = function (offset) {\n    var measurements = _this.getMeasurements();\n    return notUndefined(measurements[findNearestBinarySearch(0, measurements.length - 1, function (index) {\n      return notUndefined(measurements[index]).start;\n    }, offset)]);\n  };\n  this.getOffsetForAlignment = function (toOffset, align) {\n    var size = _this.getSize();\n    if (align === 'auto') {\n      if (toOffset <= _this.scrollOffset) {\n        align = 'start';\n      } else if (toOffset >= _this.scrollOffset + size) {\n        align = 'end';\n      } else {\n        align = 'start';\n      }\n    }\n    if (align === 'start') {\n      toOffset = toOffset;\n    } else if (align === 'end') {\n      toOffset = toOffset - size;\n    } else if (align === 'center') {\n      toOffset = toOffset - size / 2;\n    }\n    var scrollSizeProp = _this.options.horizontal ? 'scrollWidth' : 'scrollHeight';\n    var scrollSize = _this.scrollElement ? 'document' in _this.scrollElement ? _this.scrollElement.document.documentElement[scrollSizeProp] : _this.scrollElement[scrollSizeProp] : 0;\n    var maxOffset = scrollSize - _this.getSize();\n    return Math.max(Math.min(maxOffset, toOffset), 0);\n  };\n  this.getOffsetForIndex = function (index, align) {\n    if (align === void 0) {\n      align = 'auto';\n    }\n    index = Math.max(0, Math.min(index, _this.options.count - 1));\n    var measurement = notUndefined(_this.getMeasurements()[index]);\n    if (align === 'auto') {\n      if (measurement.end >= _this.scrollOffset + _this.getSize() - _this.options.scrollPaddingEnd) {\n        align = 'end';\n      } else if (measurement.start <= _this.scrollOffset + _this.options.scrollPaddingStart) {\n        align = 'start';\n      } else {\n        return [_this.scrollOffset, align];\n      }\n    }\n    var toOffset = align === 'end' ? measurement.end + _this.options.scrollPaddingEnd : measurement.start - _this.options.scrollPaddingStart;\n    return [_this.getOffsetForAlignment(toOffset, align), align];\n  };\n  this.isDynamicMode = function () {\n    return _this.measureElementCache.size > 0;\n  };\n  this.cancelScrollToIndex = function () {\n    if (_this.scrollToIndexTimeoutId !== null) {\n      clearTimeout(_this.scrollToIndexTimeoutId);\n      _this.scrollToIndexTimeoutId = null;\n    }\n  };\n  this.scrollToOffset = function (toOffset, _temp) {\n    var _ref5 = _temp === void 0 ? {} : _temp,\n      _ref5$align = _ref5.align,\n      align = _ref5$align === void 0 ? 'start' : _ref5$align,\n      behavior = _ref5.behavior;\n    _this.cancelScrollToIndex();\n    if (behavior === 'smooth' && _this.isDynamicMode()) {\n      console.warn('The `smooth` scroll behavior is not fully supported with dynamic size.');\n    }\n    _this._scrollToOffset(_this.getOffsetForAlignment(toOffset, align), {\n      adjustments: undefined,\n      behavior: behavior\n    });\n  };\n  this.scrollToIndex = function (index, _temp2) {\n    var _ref6 = _temp2 === void 0 ? {} : _temp2,\n      _ref6$align = _ref6.align,\n      initialAlign = _ref6$align === void 0 ? 'auto' : _ref6$align,\n      behavior = _ref6.behavior;\n    index = Math.max(0, Math.min(index, _this.options.count - 1));\n    _this.cancelScrollToIndex();\n    if (behavior === 'smooth' && _this.isDynamicMode()) {\n      console.warn('The `smooth` scroll behavior is not fully supported with dynamic size.');\n    }\n    var _this$getOffsetForInd = _this.getOffsetForIndex(index, initialAlign),\n      toOffset = _this$getOffsetForInd[0],\n      align = _this$getOffsetForInd[1];\n    _this._scrollToOffset(toOffset, {\n      adjustments: undefined,\n      behavior: behavior\n    });\n    if (behavior !== 'smooth' && _this.isDynamicMode()) {\n      _this.scrollToIndexTimeoutId = setTimeout(function () {\n        _this.scrollToIndexTimeoutId = null;\n        var elementInDOM = _this.measureElementCache.has(_this.options.getItemKey(index));\n        if (elementInDOM) {\n          var _this$getOffsetForInd2 = _this.getOffsetForIndex(index, align),\n            _toOffset = _this$getOffsetForInd2[0];\n          if (!approxEqual(_toOffset, _this.scrollOffset)) {\n            _this.scrollToIndex(index, {\n              align: align,\n              behavior: behavior\n            });\n          }\n        } else {\n          _this.scrollToIndex(index, {\n            align: align,\n            behavior: behavior\n          });\n        }\n      });\n    }\n  };\n  this.scrollBy = function (delta, _temp3) {\n    var _ref7 = _temp3 === void 0 ? {} : _temp3,\n      behavior = _ref7.behavior;\n    _this.cancelScrollToIndex();\n    if (behavior === 'smooth' && _this.isDynamicMode()) {\n      console.warn('The `smooth` scroll behavior is not fully supported with dynamic size.');\n    }\n    _this._scrollToOffset(_this.scrollOffset + delta, {\n      adjustments: undefined,\n      behavior: behavior\n    });\n  };\n  this.getTotalSize = function () {\n    var _this$getMeasurements;\n    return (((_this$getMeasurements = _this.getMeasurements()[_this.options.count - 1]) == null ? void 0 : _this$getMeasurements.end) || _this.options.paddingStart) - _this.options.scrollMargin + _this.options.paddingEnd;\n  };\n  this._scrollToOffset = function (offset, _ref8) {\n    var adjustments = _ref8.adjustments,\n      behavior = _ref8.behavior;\n    _this.options.scrollToFn(offset, {\n      behavior: behavior,\n      adjustments: adjustments\n    }, _this);\n  };\n  this.measure = function () {\n    _this.itemSizeCache = new Map();\n    _this.notify(false);\n  };\n  this.setOptions(_opts);\n  this.scrollRect = this.options.initialRect;\n  this.scrollOffset = this.options.initialOffset;\n  this.measurementsCache = this.options.initialMeasurementsCache;\n  this.measurementsCache.forEach(function (item) {\n    _this.itemSizeCache.set(item.key, item.size);\n  });\n  this.maybeNotify();\n};\nvar findNearestBinarySearch = function findNearestBinarySearch(low, high, getCurrentValue, value) {\n  while (low <= high) {\n    var middle = (low + high) / 2 | 0;\n    var currentValue = getCurrentValue(middle);\n    if (currentValue < value) {\n      low = middle + 1;\n    } else if (currentValue > value) {\n      high = middle - 1;\n    } else {\n      return middle;\n    }\n  }\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\nfunction calculateRange(_ref9) {\n  var measurements = _ref9.measurements,\n    outerSize = _ref9.outerSize,\n    scrollOffset = _ref9.scrollOffset;\n  var count = measurements.length - 1;\n  var getOffset = function getOffset(index) {\n    return measurements[index].start;\n  };\n  var startIndex = findNearestBinarySearch(0, count, getOffset, scrollOffset);\n  var endIndex = startIndex;\n  while (endIndex < count && measurements[endIndex].end < scrollOffset + outerSize) {\n    endIndex++;\n  }\n  return {\n    startIndex: startIndex,\n    endIndex: endIndex\n  };\n}\n\nexport { Virtualizer, defaultKeyExtractor, defaultRangeExtractor, elementScroll, measureElement, observeElementOffset, observeElementRect, observeWindowOffset, observeWindowRect, windowScroll };\n//# sourceMappingURL=index.mjs.map\n","import * as React from 'react'\nimport { flushSync } from 'react-dom'\nimport {\n  elementScroll,\n  observeElementOffset,\n  observeElementRect,\n  observeWindowOffset,\n  observeWindowRect,\n  PartialKeys,\n  Virtualizer,\n  VirtualizerOptions,\n  windowScroll,\n} from '@tanstack/virtual-core'\nexport * from '@tanstack/virtual-core'\n\n//\n\nconst useIsomorphicLayoutEffect =\n  typeof document !== 'undefined' ? React.useLayoutEffect : React.useEffect\n\nfunction useVirtualizerBase<\n  TScrollElement extends Element | Window,\n  TItemElement extends Element,\n>(\n  options: VirtualizerOptions<TScrollElement, TItemElement>,\n): Virtualizer<TScrollElement, TItemElement> {\n  const rerender = React.useReducer(() => ({}), {})[1]\n\n  const resolvedOptions: VirtualizerOptions<TScrollElement, TItemElement> = {\n    ...options,\n    onChange: (instance, sync) => {\n      if (sync) {\n        flushSync(rerender)\n      } else {\n        rerender()\n      }\n      options.onChange?.(instance, sync)\n    },\n  }\n\n  const [instance] = React.useState(\n    () => new Virtualizer<TScrollElement, TItemElement>(resolvedOptions),\n  )\n\n  instance.setOptions(resolvedOptions)\n\n  React.useEffect(() => {\n    return instance._didMount()\n  }, [])\n\n  useIsomorphicLayoutEffect(() => {\n    return instance._willUpdate()\n  })\n\n  return instance\n}\n\nexport function useVirtualizer<\n  TScrollElement extends Element,\n  TItemElement extends Element,\n>(\n  options: PartialKeys<\n    VirtualizerOptions<TScrollElement, TItemElement>,\n    'observeElementRect' | 'observeElementOffset' | 'scrollToFn'\n  >,\n): Virtualizer<TScrollElement, TItemElement> {\n  return useVirtualizerBase<TScrollElement, TItemElement>({\n    observeElementRect: observeElementRect,\n    observeElementOffset: observeElementOffset,\n    scrollToFn: elementScroll,\n    ...options,\n  })\n}\n\nexport function useWindowVirtualizer<TItemElement extends Element>(\n  options: PartialKeys<\n    VirtualizerOptions<Window, TItemElement>,\n    | 'getScrollElement'\n    | 'observeElementRect'\n    | 'observeElementOffset'\n    | 'scrollToFn'\n  >,\n): Virtualizer<Window, TItemElement> {\n  return useVirtualizerBase<Window, TItemElement>({\n    getScrollElement: () => (typeof document !== 'undefined' ? window : null),\n    observeElementRect: observeWindowRect,\n    observeElementOffset: observeWindowOffset,\n    scrollToFn: windowScroll,\n    initialOffset: typeof document !== 'undefined' ? window.scrollY : undefined,\n    ...options,\n  })\n}\n"],"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","memo","getDeps","fn","opts","_opts$initialDeps","result","deps","initialDeps","depTime","debug","Date","now","resultTime","newDeps","some","dep","index","depEndTime","Math","round","resultEndTime","resultFpsPercentage","pad","str","num","String","console","info","max","min","onChange","notUndefined","value","msg","undefined","Error","approxEqual","a","b","abs","defaultKeyExtractor","defaultRangeExtractor","range","start","startIndex","overscan","end","endIndex","count","arr","_i","push","observeElementRect","instance","cb","element","scrollElement","handler","rect","width","height","getBoundingClientRect","observer","ResizeObserver","entries","entry","borderBoxSize","box","inlineSize","blockSize","observe","unobserve","observeWindowRect","innerWidth","innerHeight","addEventListener","passive","removeEventListener","observeElementOffset","options","horizontal","observeWindowOffset","measureElement","windowScroll","offset","_ref","_instance$scrollEleme","_instance$scrollEleme2","_ref$adjustments","adjustments","behavior","toOffset","scrollTo","elementScroll","_ref2","_instance$scrollEleme3","_instance$scrollEleme4","_ref2$adjustments","Virtualizer","_opts","_ro","get","_this","unsubs","isScrolling","isScrollingTimeoutId","scrollToIndexTimeoutId","measurementsCache","itemSizeCache","Map","pendingMeasuredCacheIndexes","scrollDirection","scrollAdjustments","measureElementCache","forEach","_measureElement","disconnect","_get","_get2","_get3","setOptions","_ref3","initialOffset","paddingStart","paddingEnd","scrollPaddingStart","scrollPaddingEnd","getItemKey","rangeExtractor","initialRect","scrollMargin","scrollingDelay","indexAttribute","initialMeasurementsCache","lanes","notify","sync","maybeNotify","calculateRange","cleanup","filter","Boolean","d","_didMount","_willUpdate","getScrollElement","_scrollToOffset","scrollOffset","scrollRect","clearTimeout","setTimeout","getSize","memoOptions","getFurthestMeasurement","measurements","furthestMeasurementsFound","furthestMeasurements","m","measurement","has","lane","previousFurthestMeasurement","set","size","Array","from","values","sort","getMeasurements","_ref4","slice","_i2","furthestMeasurement","measuredSize","estimateSize","outerSize","_ref9","getOffset","findNearestBinarySearch","getIndexes","indexFromElement","node","attributeName","indexStr","getAttribute","parseInt","warn","item","isConnected","prevNode","measuredItemSize","resizeItem","cached","_this$itemSizeCache$g","delta","getVirtualItems","indexes","virtualItems","k","len","getVirtualItemForOffset","getOffsetForAlignment","align","scrollSizeProp","maxOffset","document","documentElement","getOffsetForIndex","isDynamicMode","cancelScrollToIndex","scrollToOffset","_temp","_ref5","_ref5$align","scrollToIndex","_temp2","_ref6","_ref6$align","initialAlign","_this$getOffsetForInd","_toOffset","scrollBy","_temp3","getTotalSize","_this$getMeasurements","_ref8","scrollToFn","measure","low","high","getCurrentValue","middle","currentValue","useIsomorphicLayoutEffect","React","useLayoutEffect","useEffect","useVirtualizerBase","rerender","useReducer","resolvedOptions","flushSync","useState","window","scrollY"],"mappings":"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"}